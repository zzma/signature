<div id="outerViewerContainer">
  <div id="mainViewerContainer">
    <div class="toolbar">
      <div id="toolbarContainer">
        <div id="toolbarViewer">
          <div id="toolbarViewerLeft">
            <div class="splitToolbarButton">
              <button class="toolbarButton pageUp" id="previous" title="Previous page">
                <span>Previous</span>
              </button>
              <div class="splitToolbarButtonSeparator"></div>
              <button class="toolbarButton pageDown" id="next" title="Next page">
                <span>Next</span>
              </button>
            </div>
            <label class="toolbarLabel desktop-only-inline" for="pageNumber" id="pageNumberLabel">Page:</label>
            <input class="toolbarField pageNumber" type="number" id="pageNumber" title="Page number"/>
            <span class="toolbarLabel" id="numPages">of X</span>
            <button href="#" id="download" class="toolbarButton download" title="Download document"> Download </button>
          </div>
          <div id="toolbarViewerRight">
            <div class="splitToolbarButton">
              <button class="toolbarButton zoomOut" id="zoomOut" title="Zoom Out">
                <span>Zoom Out</span>
              </button>
              <div class="splitToolbarButtonSeparator"></div>
              <button class="toolbarButton zoomIn" id="zoomIn" title="Zoom In">
                <span>Zoom In</span>
              </button>
            </div>
            <span class="dropdownToolbarButton desktop-only-inline" id="scaleSelectContainer">
              <select title="Zoom" id="scaleSelect">
                <option value="auto" selected>Auto</option>
                <option id="customScaleOption" value="custom"></option>
                <option value="0.5">50%</option>
                <option value="0.75">75%</option>
                <option value="1">100%</option>
                <option value="1.25">125%</option>
                <option value="1.5">150%</option>
                <option value="2">200%</option>
              </select>
            </span>
          </div>
        </div>
        <!--<div id="loadingBar"></div>-->
      </div>
    </div>
    <div id="viewerContainer">
      <%= content_tag "div", id: "viewer", data: { fields: document[:fields] } do %>
          <% document[:images].each_with_index do |image, index| %>
              <div id="<%= 'pageContainer' + index.to_s %>" class="page">
                <a name="<%= index %>"></a>
                <div id= "<%= 'imageWrapper' + index.to_s %>" class="imageWrapper">
                  <img src="<%= image %>"/>
                </div>
              </div>
          <% end %>
      <% end %>
    </div>
    <div class="footer">
      <div id="footerContainer">
        <div id="footerContainerLeft">
          <button id="nextSignature" class="">Next Signature</button>
        </div>
        <div id="footerContainerRight">
          <button id="finishSigning" class="inactive">Submit <span class="desktop-only-inline">Document</span></button>
        </div>
      </div>
    </div>

  </div>
  <div id="signatureModal" class="noSelect">
    <div class="modalContainer">
      <div class="modalTabbar">
        <div id="typeSignatureForm">
          <div class="typeField">
            <label> Type Your Name Below </label>
            <input type="text" id="typeSignature" placeholder="Your Name (e.g. John Hancock)" />
          </div>
        </div>
        <ul class="modalTabs">
          <li class="active" id="drawSignatureTab">Draw Your Signature</li>
          <li class="" id="typeSignatureTab">Type Your Signature</li>
        </ul>
      </div>

      <div class="modalContent">

        <div id="signaturePad">

        </div>
      </div>

      <div class="modalFooter">
        <div class="modalFooterLeft">
          <label>
            <input type="checkbox" id="agreeSignature"/>
            &nbsp;
            I agree to the <a href="http://sports.yahoo.com" target="_blank" id="esignTerms">electronic signature terms & conditions.</a>
          </label>
        </div>
        <div class="modalFooterRight">
          <button id="signSignature" class="inactive">Apply <span class="desktop-only-inline">Signature</span></button>
        </div>
      </div>
      <button id="cancelSignature">Ã—</button>

    </div>
  </div>
</div>

<input type="hidden" id="downloadLink" value="<%= document[:download_url] %>"/>

<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<%= javascript_include_tag "signature/doc_viewer.js" %>
<%= javascript_include_tag "signature/jSignature.min.js" %>

<!--<%= javascript_include_tag "signature/json2.min.js" %>-->
<!--<%= javascript_include_tag "signature/jquery.signaturepad.js" %>-->
<script type="text/javascript">
//    $(document).ready(function () {
//        $('.sigPad').signaturePad();
//    });

    $(document).ready(function() {

        $("#signaturePad").jSignature();

    })
</script>